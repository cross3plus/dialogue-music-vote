<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ¥½æ›²æŠ•ç¥¨ãƒ•ã‚©ãƒ¼ãƒ </title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    h1 { font-size: 1.5em; }
    form { display: flex; flex-direction: column; gap: 15px; }
    fieldset { border: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }
    .form-row { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px; }
    input[type="number"] { width: 60px; padding: 8px; }
    input[type="text"], button { padding: 8px; font-size: 1em; }
    .message { padding: 12px; border-radius: 5px; margin-top: 10px; text-align: center; }
    .error { color: #d32f2f; background-color: #ffebee; border: 1px solid #d32f2f; }
    .success { color: #2e7d32; background-color: #e8f5e9; border: 1px solid #2e7d32; }
    button:disabled { background-color: #ccc; cursor: not-allowed; }
  </style>
</head>
<body>
  <h1>ğŸµ æ¥½æ›²æŠ•ç¥¨ãƒ•ã‚©ãƒ¼ãƒ </h1>

  <div id="votedMessage" style="display:none;" class="success">
    ã‚ãªãŸã¯æ—¢ã«æŠ•ç¥¨æ¸ˆã¿ã§ã™ã€‚ã”å”åŠ›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
  </div>

  <form id="voteForm">
    <p>10ç‚¹ã‚’å¥½ããªæ¥½æ›²ã«è‡ªç”±ã«é…åˆ†ã—ã¦ãã ã•ã„ï¼ˆåˆè¨ˆ10ç‚¹ï¼‰</p>

    <div class="form-row">
      <label for="name">åå‰ï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼‰:</label>
      <input type="text" id="name" required>
    </div>

    <fieldset id="songs"></fieldset>

    <div id="messageArea"></div>
    <button type="submit" id="submitButton">æŠ•ç¥¨ã™ã‚‹</button>
  </form>

  <script>
    const songTitles = [
      "ã¯ã˜ã‚ã¦ã®ã‹ãã‚ã„ï¼","ãƒ€ã‚¤ã‚¢ãƒ­ãƒ¼ã‚°ï¼‹ã‚¤ãƒ³ãƒ“ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼","å¤§å†’é™ºã‚’ã‚ˆã‚ã—ã","å¥½ãã ã‚ˆã€å¥½ãã€‚","ãƒˆãƒ¼ã‚¯ï¼ãƒˆãƒ¼ã‚¯ï¼ãƒˆãƒ¼ã‚¯ï¼",
      "Domestic Force!!","ãƒ‘ã‚¸ãƒ£ãƒ de ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼","ã¼ãã‚‰ã¯ç´ æ•µã ","ã‚ãŸã‚Šã¾ãˆã ã‹ã‚‰","ã‹ã„ã‹ã„ã›ã‚“ã’ã‚“ï¼",
      "å¤ã®èŠ±ç«ã¨å›ã¨é’","äººç”Ÿã‚¤ãƒ¼ã‚¸ãƒ¼ï¼Ÿ","èµ°ã‚Œ","ã‚ã‚„ãµã‚ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯","èŠ±å’²ãåƒ•ã‚‰ã®ã‚¢ãƒ³ã‚µãƒ¼ã‚’",
      "ãŠã‚‚ã„ã§ã—ã‚Šã¨ã‚Š","ã‚·ãƒ¥ã‚¬ãƒ¼ãƒ­ã‚±ãƒƒãƒˆ","Sincere Grace","ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ãƒ”ãƒ¼ã‚¹!!","è¬è§£ãã¯ã‚­ã‚¹ã®ã‚ã¨ã§",
      "ãƒ—ãƒ©ã‚¤ãƒ™ã‚¤ãƒˆ","I my me mind","ã‚¢ã‚¤ã‚¬ãƒƒãƒ†â™¡ãƒ©ãƒ³ãƒ†","20xxMUEã®å…‰","é€æ˜ã§ãã‚Œã„",
      "ã¯ã£ã¡ã‚ƒã‘ãƒ€ã‚¤ã‚¢ãƒ­ãƒ¼ã‚°ï¼‹ã‚¯ãƒªã‚¹ãƒã‚¹ï¼","DIALOGUEï¼‹ã¯ä¸Šã€…ã ","DIALOGUEï¼‹ã¯ã¾ãŸç«‹ã¡ä¸ŠãŒã‚‹","åƒ•ã‚‰ãŒæ„šã‹ã ãªã‚“ã¦èª°ãŒè¨€ã£ãŸ","ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­ã„ã„ãª",
      "æ‹ã¯ä¸–ç•Œå®šç†ã¨å…±ã«","ã‚¬ã‚¬ãƒ”ãƒ¼ã‚¬ã‚¬","ãƒ‡ãƒãƒ–ã¨ã‚¹ãƒ”ã‚«","ã‚·ãƒ£ãƒ¼ãƒ™ãƒƒãƒˆãƒãƒ¼ãƒ¡ã‚¤ãƒ‰","1000ä¸‡å›ãƒã‚°ãªã‚“ã ",
      "Dï¼‹ has come","çµ¶æ™¯çµ¶å¥½ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ‡ã‚¤â€¼","ã‚ã£ã¡ã‚ƒã‚ªãƒ³ãƒªãƒ¼ãƒ¦ãƒ¼","ã‚„ã°ãã‚…ã‚“â™¡ã‚·ãƒ¥ãƒ¼ãƒ™ãƒ«ãƒˆ","MAHOROBA-Deli",
      "ã†ã—ã¿ã¤ã‚ã£ãƒ‘ãƒ¬ã‚¤ãƒ‰","å¤•ç©ºèˆªè·¯","ã¼ãã‚‰ã®ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹","ã‹ã™ã‹ã§ãŸã—ã‹","ã¾ã‚‹ã£ã¨ã‚¸ãƒ–ãƒ³æ™‚ä»£",
      "ã«ã‚ƒã‚“ã¼ã‚Šãƒ¼deãƒ¢ãƒƒãƒ•ã‚£ãƒ¼!!","æ¥ä¸–ãªã‚“ã¦å¾…ã£ã¦ã‚‰ã‚“ãªã„","ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒ•ã‚¡ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ¬","ã‚¤ãƒ¼ã‚¸ãƒ¼ï¼Ÿãƒãƒ¼ãƒ‰ï¼Ÿã—ã‹ã—ã¦é€²ã‚ã£ï¼","èª°ã‹ã˜ã‚ƒãªã„ã‹ã‚‰",
      "ãƒ¦ãƒ¼ãƒˆãƒ”ã‚¢å­¦æ¦‚è«–","ãƒãƒ£ãƒ³ãƒãƒ¯ãƒ³ãƒfancy!!","everything!","æµæ˜Ÿç¾¤ã®å‘ã“ã†ã§","ã‚ãŸã—ãŸã¡ã®ãƒ©ãƒ—ã‚½ãƒ‡ã‚£ãƒ¼",
      "dialogueï¼‹kawaii","ã“ã‚Œã¯è¨“ç·´ã§ã¯ãªã„","å‡ã¦ã¤ã„ã¦ç§’é€Ÿ","ãŸã³ã®ã¨ã¡ã‚…","FU-TSU-TSU-KA I love you",
      "TREASUREï¼","ãƒ­ãƒƒã‚¯ãƒ³ãƒ­ãƒ¼ãƒ«ï¼","ã‚¢ãƒªãƒã‚¤ãªã‚«ãƒ¼ãƒ†ã‚·ãƒ¼","ã‚«ã‚¯ãƒã‚´ãƒˆã‚­dance","DIALOGUEï¼‹Rap for ãƒãƒ£ãƒ³ãƒãƒ¯ãƒ³ãƒjourney!!"
    ];

    const songField = document.getElementById("songs");
    songTitles.forEach(title => {
      const row = document.createElement("div");
      row.className = "form-row";

      const label = document.createElement("label");
      label.textContent = title;

      const input = document.createElement("input");
      input.type = "number";
      input.min = "0";
      input.max = "10";
      input.value = "0";
      input.name = title;

      row.appendChild(label);
      row.appendChild(input);
      songField.appendChild(row);
    });

    const voteForm = document.getElementById("voteForm");
    const submitButton = document.getElementById("submitButton");
    const messageArea = document.getElementById("messageArea");
    const votedMessage = document.getElementById('votedMessage');
    const VOTE_FLAG_KEY = 'æ¥½æ›²æŠ•ç¥¨2025';

    if (localStorage.getItem(VOTE_FLAG_KEY)) {
      voteForm.style.display = 'none';
      votedMessage.style.display = 'block';
    }

    voteForm.addEventListener("submit", function(e) {
      e.preventDefault();

      messageArea.textContent = '';
      messageArea.className = 'message';

      const name = document.getElementById("name").value.trim();
      const inputs = document.querySelectorAll('#songs input');
      let total = 0;
      const data = { name: name, votes: {} };

      inputs.forEach(input => {
        const val = Number(input.value);
        total += val;
        data.votes[input.name] = val;
      });

      if (total !== 10) {
        messageArea.textContent = `åˆè¨ˆã¯10ç‚¹ã«ã—ã¦ãã ã•ã„ï¼ˆç¾åœ¨: ${total}ç‚¹ï¼‰`;
        messageArea.classList.add('error');
        return;
      }

      submitButton.disabled = true;
      submitButton.textContent = 'é€ä¿¡ä¸­...';

      const scriptURL = "https://script.google.com/macros/s/AKfycbwGscZXCR-q3tsTonQF2cAhagokWeut9MJFygSFtVBZn9wS-37IQtff1Ujvkmx433VybQ/exec";

      fetch(scriptURL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'text/plain;charset=utf-8' },
        body: JSON.stringify(data)
      })
      .then(() => {
        messageArea.textContent = 'æŠ•ç¥¨ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸï¼ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚';
        messageArea.classList.add('success');
        localStorage.setItem(VOTE_FLAG_KEY, 'true');
        voteForm.style.display = 'none';
        votedMessage.style.display = 'block';
      })
      .catch(error => {
        messageArea.textContent = 'é€ä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚';
        messageArea.classList.add('error');
        console.error('Fetch Error:', error);
      })
      .finally(() => {
        submitButton.disabled = false;
        submitButton.textContent = 'æŠ•ç¥¨ã™ã‚‹';
      });
    });
  </script>
</body>
</html>

